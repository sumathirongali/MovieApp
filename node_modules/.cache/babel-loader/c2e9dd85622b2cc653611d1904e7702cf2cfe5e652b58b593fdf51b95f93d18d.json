{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport headerComp from './Header.vue';\nimport footerComp from './Footer.vue';\nimport axios from 'axios';\nimport RatingComp from './Rating.vue';\nimport api from '@/api.js';\nimport { useRoute } from 'vue-router';\nimport { toRaw } from 'vue';\nexport default {\n  name: 'detailPageComp',\n  data() {\n    return {\n      data: null,\n      route: useRoute(),\n      YTlink: '',\n      title: '',\n      dialog: false,\n      movieRating: {},\n      comparsionLink: '/comparisonPage/',\n      email: '',\n      chkFav: false,\n      imgFavor: \"unfavoriteIcon.png\",\n      movieID: 0\n    };\n  },\n  components: {\n    headerComp,\n    footerComp,\n    RatingComp\n  },\n  async mounted() {\n    //To return to home page if not logged in \n    let userName = localStorage.getItem('user-info');\n    if (!userName) {\n      return this.$router.push({\n        name: 'HomePage'\n      });\n    }\n\n    //To extract specific movie based on movie id \n    await axios.get(`https://www.omdbapi.com/?i=${this.route.params.id}&apikey=${api.apikey}&plot=full`).then(response => this.data = response.data);\n\n    //Saving the same movie id in a variable to use it for comparison page\n    this.comparsionLink = this.comparsionLink.concat(this.route.params.id);\n\n    //Using locally stored email for favorite page\n    let userInfo = localStorage.getItem('user-info-email');\n    if (userInfo !== null) {\n      userInfo = userInfo.substring(1, userInfo.length - 1);\n      this.email = userInfo;\n    }\n    this.fetchFavDetails();\n  },\n  methods: {\n    concatYTlink() {\n      let a = \"https://www.youtube.com/results?search_query=\";\n      let b = this.data.Title;\n      let c = \"+trailer\";\n      this.YTlink = a.concat(b, c);\n    },\n    setDialog(val) {\n      this.dialog = true;\n      this.title = val;\n    },\n    onSelectRating(val) {\n      this.movieRating = val;\n      //   console.log(val,\"This is main page\")\n    },\n\n    onSubmit(val) {\n      // this.movieRating=val?.rating;\n      //   console.log(val);\n      let obj = toRaw(val);\n      this.data.movieRating = obj;\n      localStorage.setItem(obj?.title, JSON.stringify(obj));\n      this.dialog = false;\n    },\n    async manageFavorite() {\n      if (this.chkFav == true) {\n        //alert(this.movieID);\n        await axios.delete('http://localhost:3000/favorites/' + this.movieID);\n      } else {\n        await axios.post('http://localhost:3000/favorites', {\n          email: this.email,\n          movieName: this.data.Title,\n          Genre: this.data.Genre,\n          Director: this.data.Director,\n          movieRating: this.data.imdbRating,\n          moviePoster: this.data.Poster\n        });\n      }\n      this.fetchFavDetails();\n    },\n    async fetchFavDetails() {\n      const fav = await axios.get('http://localhost:3000/favorites/?email=' + this.email + '&movieName=' + this.data.Title + '');\n      if (fav.data.length === 0) {\n        this.chkFav = false;\n        this.imgFavor = \"unfavoriteIcon.png\";\n      } else {\n        this.movieID = fav.data[0].id;\n        this.chkFav = true;\n        this.imgFavor = \"favoriteIcon.png\";\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["headerComp","footerComp","axios","RatingComp","api","useRoute","toRaw","name","data","route","YTlink","title","dialog","movieRating","comparsionLink","email","chkFav","imgFavor","movieID","components","mounted","userName","localStorage","getItem","$router","push","get","params","id","apikey","then","response","concat","userInfo","substring","length","fetchFavDetails","methods","concatYTlink","a","b","Title","c","setDialog","val","onSelectRating","onSubmit","obj","setItem","JSON","stringify","manageFavorite","delete","post","movieName","Genre","Director","imdbRating","moviePoster","Poster","fav"],"sourceRoot":"","sources":["C:\\Workspace\\MovieApp\\src\\components\\DetailPage.vue"],"sourcesContent":["<template>\r\n<headerComp />\r\n\r\n    <!--Movie Title-->\r\n    <v-card-title class=\"text-left font-weight-bold text-h4\">{{ data?.Title }}</v-card-title>\r\n\r\n    <!--Favorite Button-->\r\n    <span class=\"wishlist movie_data_subheading\">\r\n        <p class=\"text-left mb-1 mt-2 ml-3\">Add to Favourite:</p> \r\n        <img id=\"imgFav\" v-bind:src=\"require('../assets/' + imgFavor)\" style=\"width:32px;height:32px;\" v-on:click=\"manageFavorite()\" />\r\n    </span>\r\n\r\n    <!--Movie Details-->\r\n    <div class=\"d-flex\">\r\n        <img :src=\"data?.Poster\" alt=\"movie_poster\" />\r\n        <div style=\"marginLeft:-10px;width:100%\">\r\n            <p class=\"text-left text-subtitle-1 mb-1\"><b>Duration</b> : {{ data?.Runtime }}</p>\r\n            <p class=\"text-left text-subtitle-1 mb-1\"><b>Ratings</b> : {{ data?.imdbRating }}</p>\r\n            <p class=\"text-left text-subtitle-1 mb-1\"><b>Released Date</b> : {{ data?.Released }}</p>\r\n            <p class=\"text-left text-subtitle-1 mb-1\"><b>Genre</b> : {{ data?.Genre }}</p>\r\n            <p class=\"text-left text-subtitle-1 mb-1\"><b>Language</b> : {{ data?.Language }}</p>\r\n            <p class=\"text-left text-subtitle-1 mb-1\" v-if=\"data?.Awards !== 'N/A'\"><b>Awards</b> : {{ data?.Awards }}</p>\r\n\r\n            <div class=\"mt-2 d-flex\">\r\n                <v-btn color=\"#c2dff0\" class=\"text-white mr-2\" v-on:click=\"concatYTlink()\"><a :href=YTlink target=\"_blank\" style=\"text-decoration:none\">Watch Trailer</a></v-btn>\r\n                <v-btn color=\"#c2dff0\" class=\"text-white mr-2\"><a href=\"https://netflix.com/\" target=\"_blank\" style=\"text-decoration:none\">Watch Movie</a></v-btn>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--More Movie Details-->\r\n    <div>\r\n        <p class=\"text-left text-h6 mb-1 mt-6 ml-3\"><b>Description :</b></p>\r\n        <p class=\"text-left mb-1 mt-2 ml-3\">{{ data?.Plot }}</p>\r\n        <p class=\"text-left text-h6 mb-1 mt-5 ml-3\"><b>Cast and Crew</b></p>\r\n        <p class=\"text-left mb-1 mt-2 ml-3\"><b>Director : </b> {{ data?.Director }}</p>\r\n        <p class=\"text-left mb-1 mt-2 ml-3\"><b>Writer : </b> {{ data?.Writer }}</p>\r\n        <p class=\"text-left mb-1 mt-2 ml-3\"><b>Actors : </b> {{ data?.Actors }}</p>\r\n    </div>\r\n    \r\n    <!--Rating & Comparison Information-->\r\n    <div class=\"d-flex mb-10 mt-10\">\r\n        <v-btn color=\"#1c3d63\" class=\"text-white ml-5\" v-on:click=\"setDialog(data?.Title)\" >Submit rating</v-btn>\r\n        <p v-if=\"data?.movieRating\" class=\"movie_data_subheading\"><b>Submitted Rating:</b> \r\n            {{data?.movieRating.rating}} /10 </p>\r\n        <v-dialog v-model=\"dialog\">\r\n            <v-card>\r\n                <v-container>\r\n                    <RatingComp :title=\"this.title\" @rated=\"onSelectRating\" />\r\n                </v-container>\r\n                <v-card-actions>\r\n                    <v-spacer />\r\n                    <!-- <v-col :align-self=\"'center'\"> -->\r\n                    <v-btn color=\"primary\" @click=\"dialog = false\">Close</v-btn>\r\n                    <v-btn color=\"primary\" @click=\"onSubmit(this?.movieRating)\">Submit</v-btn>\r\n                    <!-- </v-col> -->\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n        <v-spacer></v-spacer>\r\n        <router-link :to=comparsionLink style=\"text-decoration:none\"><v-btn color=\"#1c3d63\" class=\"text-white mr-5\">Compare With Other Movies</v-btn></router-link>\r\n    </div>\r\n\r\n<footerComp />\r\n</template>\r\n\r\n\r\n<script>\r\nimport headerComp from './Header.vue';\r\nimport footerComp from './Footer.vue';\r\nimport axios from 'axios';\r\nimport RatingComp from './Rating.vue';\r\nimport api from '@/api.js';\r\nimport {useRoute} from 'vue-router';\r\nimport {toRaw} from 'vue';\r\n\r\nexport default {\r\n    name: 'detailPageComp',\r\n    data() {\r\n        return {\r\n            data: null,\r\n            route: useRoute(),\r\n            YTlink: '',\r\n            title: '',\r\n            dialog: false,\r\n            movieRating: {},\r\n            comparsionLink: '/comparisonPage/',\r\n            email: '',\r\n            chkFav: false,\r\n            imgFavor: \"unfavoriteIcon.png\",\r\n            movieID: 0\r\n        }\r\n    },\r\n    components: {\r\n        headerComp,\r\n        footerComp,\r\n        RatingComp\r\n    },\r\n    async mounted() {\r\n        //To return to home page if not logged in \r\n        let userName = localStorage.getItem('user-info');\r\n        if(!userName){\r\n            return this.$router.push({\r\n                name: 'HomePage'\r\n            });\r\n        }\r\n\r\n        //To extract specific movie based on movie id \r\n        await axios\r\n            .get(`https://www.omdbapi.com/?i=${this.route.params.id}&apikey=${api.apikey}&plot=full`)\r\n            .then(response => this.data = response.data);\r\n\r\n        //Saving the same movie id in a variable to use it for comparison page\r\n        this.comparsionLink = this.comparsionLink.concat(this.route.params.id);\r\n\r\n        //Using locally stored email for favorite page\r\n        let userInfo = localStorage.getItem('user-info-email');\r\n        if (userInfo !== null) {\r\n            userInfo = userInfo.substring(1, (userInfo.length - 1));\r\n            this.email = userInfo;\r\n        }\r\n        this.fetchFavDetails();\r\n    },\r\n    methods: {\r\n        concatYTlink() {\r\n            let a = \"https://www.youtube.com/results?search_query=\";\r\n            let b = this.data.Title;\r\n            let c = \"+trailer\";\r\n            this.YTlink = a.concat(b, c);\r\n        },\r\n        setDialog(val) {\r\n            this.dialog = true;\r\n            this.title = val;\r\n        },\r\n        onSelectRating(val) {\r\n            this.movieRating = val;\r\n            //   console.log(val,\"This is main page\")\r\n        },\r\n        onSubmit(val) {\r\n            // this.movieRating=val?.rating;\r\n            //   console.log(val);\r\n            let obj = toRaw(val)\r\n            this.data.movieRating = obj;\r\n            localStorage.setItem(obj?.title, JSON.stringify(obj))\r\n            this.dialog = false;\r\n        },\r\n        async manageFavorite() {\r\n            if (this.chkFav == true) {\r\n                //alert(this.movieID);\r\n                await axios.delete('http://localhost:3000/favorites/' + this.movieID);\r\n            } else {\r\n                await axios.post('http://localhost:3000/favorites', {\r\n                    email: this.email,\r\n                    movieName: this.data.Title,\r\n                    Genre: this.data.Genre,\r\n                    Director: this.data.Director,\r\n                    movieRating: this.data.imdbRating,\r\n                    moviePoster: this.data.Poster\r\n                });\r\n            }\r\n            this.fetchFavDetails();\r\n        },\r\n        async fetchFavDetails() {\r\n            const fav = await axios.get('http://localhost:3000/favorites/?email=' + this.email + '&movieName=' + this.data.Title + '');\r\n            if (fav.data.length === 0)\r\n            {\r\n                this.chkFav = false;\r\n                this.imgFavor = \"unfavoriteIcon.png\"\r\n            } else\r\n            {\r\n                this.movieID = fav.data[0].id;\r\n                this.chkFav = true;\r\n                this.imgFavor = \"favoriteIcon.png\"\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\np {\r\n    margin-bottom: 0px !important;\r\n}\r\n.movie_data_subheading {\r\n    margin-bottom: 5px;\r\n    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;\r\n\r\n}\r\n.wishlist {\r\n    position: absolute;\r\n    min-width: 30px;\r\n    min-height: 30px;\r\n    position: absolute;\r\n    right: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}