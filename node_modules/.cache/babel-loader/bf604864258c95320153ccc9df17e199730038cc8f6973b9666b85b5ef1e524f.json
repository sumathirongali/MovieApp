{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d21a9130\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"b\", null, \"Sign Up\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_responsive = _resolveComponent(\"v-responsive\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_v_card_title, {\n    class: \"text-xs-h6 text-md-h5 text-lg-h4\"\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }), _hoisted_2, _createVNode(_component_v_responsive, {\n    class: \"mx-auto\",\n    \"max-width\": \"344\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_text_field, {\n      type: \"text\",\n      placeholder: \"Enter your name\",\n      modelValue: $data.fullName,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.fullName = $event),\n      rules: $data.nameRules,\n      \"hide-details\": \"auto\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _hoisted_3, _createVNode(_component_v_text_field, {\n      type: \"number\",\n      placeholder: \"Enter your age\",\n      modelValue: $data.age,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.age = $event),\n      rules: $data.ageRules,\n      \"hide-details\": \"auto\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _hoisted_4, _createVNode(_component_v_text_field, {\n      type: \"email\",\n      placeholder: \"Enter your email\",\n      modelValue: $data.email,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.email = $event),\n      rules: $data.emailRules,\n      \"hide-details\": \"auto\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _hoisted_5, _createVNode(_component_v_text_field, {\n      type: \"password\",\n      placeholder: \"Enter your password\",\n      modelValue: $data.password,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.password = $event),\n      rules: $data.passRules,\n      \"hide-details\": \"auto\"\n    }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _hoisted_6]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_btn, {\n    onClick: _cache[4] || (_cache[4] = $event => $options.signUp()),\n    color: \"primary\",\n    elevation: \"15\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"SignUp\")]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"footer\", null, [_createVNode(_component_v_btn, {\n    tile: \"\",\n    outlined: \"\",\n    color: \"success\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.backToHomePage())\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Back to home page\")]),\n    _: 1 /* STABLE */\n  })])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;gEACuDA,oBAAc,WAAX,SAAO;gEAAmBA,oBAAM;gEAG8BA,oBAAM;gEACXA,oBAAM;gEACDA,oBAAM;gEACEA,oBAAM;;;;;;;6DANtIC,aAAoFC;IAAtEC,KAAK,EAAC;EAAkC;sBAAC,MAAc,CAAdC,UAAc;;MAAeC,UAAM,EAE1FJ,aAKeK;IALDH,KAAK,EAAC,SAAS;IAAC,WAAS,EAAC;;sBACpC,MAAoH,CAApHF,aAAoHM;MAAtGC,IAAI,EAAC,MAAM;MAACC,WAAW,EAAC,iBAAiB;kBAAUC,cAAQ;iEAARA,cAAQ;MAAGC,KAAK,EAAED,eAAS;MAAE,cAAY,EAAC;sDAASE,UAAM,EAC1HX,aAA+GM;MAAjGC,IAAI,EAAC,QAAQ;MAACC,WAAW,EAAC,gBAAgB;kBAAUC,SAAG;iEAAHA,SAAG;MAAGC,KAAK,EAAED,cAAQ;MAAE,cAAY,EAAC;sDAASG,UAAM,EACrHZ,aAAoHM;MAAtGC,IAAI,EAAC,OAAO;MAACC,WAAW,EAAC,kBAAkB;kBAAUC,WAAK;iEAALA,WAAK;MAAGC,KAAK,EAAED,gBAAU;MAAE,cAAY,EAAC;sDAASI,UAAM,EAC1Hb,aAA4HM;MAA9GC,IAAI,EAAC,UAAU;MAACC,WAAW,EAAC,qBAAqB;kBAAUC,cAAQ;iEAARA,cAAQ;MAAGC,KAAK,EAAED,eAAS;MAAE,cAAY,EAAC;sDAASK,UAAM;;MAEtId,aAA0Ee;IAA9DC,OAAK,sCAAEC,eAAM;IAAIC,KAAK,EAAC,SAAS;IAACC,SAAS,EAAC;;sBAAK,MAAM,kBAAN,QAAM;;MAElEpB,oBAES,iBADLC,aAA4Fe;IAArFK,IAAI,EAAJ,EAAI;IAACC,QAAQ,EAAR,EAAQ;IAACH,KAAK,EAAC,SAAS;IAAMF,OAAK,sCAAEC,uBAAc;;sBAAI,MAAiB,kBAAjB,mBAAiB","names":["_createElementVNode","_createVNode","_component_v_card_title","class","_hoisted_1","_hoisted_2","_component_v_responsive","_component_v_text_field","type","placeholder","$data","rules","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_component_v_btn","onClick","$options","color","elevation","tile","outlined"],"sourceRoot":"","sources":["C:\\Workspace\\MovieApp\\src\\components\\SignUp.vue"],"sourcesContent":["<template>\r\n<v-card-title class=\"text-xs-h6 text-md-h5 text-lg-h4\"><b>Sign Up</b></v-card-title><br />\r\n\r\n<v-responsive class=\"mx-auto\" max-width=\"344\">\r\n    <v-text-field type=\"text\" placeholder=\"Enter your name\" v-model=\"fullName\" :rules=\"nameRules\" hide-details=\"auto\" /><br />\r\n    <v-text-field type=\"number\" placeholder=\"Enter your age\" v-model=\"age\" :rules=\"ageRules\" hide-details=\"auto\" /><br />\r\n    <v-text-field type=\"email\" placeholder=\"Enter your email\" v-model=\"email\" :rules=\"emailRules\" hide-details=\"auto\" /><br />\r\n    <v-text-field type=\"password\" placeholder=\"Enter your password\" v-model=\"password\" :rules=\"passRules\" hide-details=\"auto\" /><br />\r\n</v-responsive>\r\n<v-btn v-on:click=\"signUp()\" color=\"primary\" elevation=\"15\">SignUp</v-btn>\r\n\r\n<footer>\r\n    <v-btn tile outlined color=\"success\" v-on:click=\"backToHomePage()\">Back to home page</v-btn>\r\n</footer>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport bcrypt from \"bcryptjs\";\r\nexport default {\r\n    name: 'signUpComp',\r\n    data() {\r\n        return {\r\n            fullName: '',\r\n            age: '',\r\n            email: '',\r\n            password: '',\r\n            ageRules: [\r\n                value => !!value || 'Required.',\r\n                value => (value && value >= 10 && value <= 100) || '• Age must be greater than 9 and less than 100.'\r\n            ],\r\n            passRules: [\r\n                value => !!value || 'Required.',\r\n                value => (value && value.length >= 6 && value != this.fullName) || '• Minimum password length is 6. • Password cannot be your name.'\r\n            ],\r\n            emailRules: [\r\n                value => !!value || 'Required.',\r\n                value => (value && /.+@.+/.test(value)) || 'Invalid email address'\r\n            ],\r\n            nameRules: [\r\n                value => !!value || 'Required.'\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        async signUp() {\r\n            let users = await axios.get(`http://localhost:3000/users/?email=${this.email}`);\r\n\r\n            if (this.password.length > 6 && this.fullName != this.password && this.age > 9 && this.age < 100 && (/.+@.+/.test(this.email))) {\r\n\r\n                if (users.data.length === 0) {\r\n                    let result = await axios.post(\"http://localhost:3000/users\", {\r\n                        name: this.fullName,\r\n                        age: this.age,\r\n                        email: this.email,\r\n                        password: bcrypt.hashSync(this.password, 10)\r\n                    });\r\n\r\n                    if (result.status == 201) {\r\n                        alert(\"registration succces\");\r\n                        //localStorage.setItem(\"user-info\", JSON.stringify(result.data));\r\n                        this.$router.push({\r\n                            name: 'LoginPage'\r\n                        })\r\n                    } else {\r\n                        alert(\"registration unsuccess. Please try again!\");\r\n                        this.fullName = '',\r\n                            this.age = '',\r\n                            this.email = '',\r\n                            this.password = ''\r\n                    }\r\n                } else {\r\n                    window.alert(\"Username already exists. Use different details\");\r\n                    this.fullName = '',\r\n                        this.age = '',\r\n                        this.email = '',\r\n                        this.password = ''\r\n                }\r\n            } else {\r\n                alert('Wrong credentials!. Please follow input checks');\r\n                this.fullName = '',\r\n                    this.age = '',\r\n                    this.email = '',\r\n                    this.password = ''\r\n            }\r\n        },\r\n\r\n        /*\r\n        async signUp() {\r\n            const user = {\r\n                name: this.fullName,\r\n                age: this.age,\r\n                email: this.email,\r\n                password: bcrypt.hashSync(this.password, 10)\r\n            }\r\n            const users = await fetch(`http://localhost:3000/users/?email=${this.email}`);\r\n            const userName = await users.json();\r\n            if (userName.length === 0) {\r\n                const res = await fetch(\"http://localhost:3000/users\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"content-type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(user),\r\n                });\r\n                if (res.status === 201) {\r\n                    {\r\n                        alert(\"registration succces\");\r\n                        this.$router.push({\r\n                            name: 'LoginPage'\r\n                        })\r\n                    }\r\n                } else {\r\n                    alert('registration unsuccess. Please try again!');\r\n                    this.fullName = '',\r\n                        this.age = '',\r\n                        this.email = '',\r\n                        this.password = ''\r\n\r\n                }\r\n            } else {\r\n                window.alert(\"Username already exists. Use different details\");\r\n                this.fullName = '',\r\n                    this.age = '',\r\n                    this.email = '',\r\n                    this.password = ''\r\n            }\r\n        },\r\n        */\r\n\r\n        backToHomePage() {\r\n            return this.$router.push({\r\n                name: 'HomePage'\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        let user = localStorage.getItem('user-info');\r\n        if (user) {\r\n            return this.$router.push({\r\n                name: 'LandingPage'\r\n            });\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nfooter {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n}\r\n\r\nbody {\r\n    background-color: aqua;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}