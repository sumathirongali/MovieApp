{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5faf54d0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"b\", null, \"Login\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_card_title = _resolveComponent(\"v-card-title\");\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_responsive = _resolveComponent(\"v-responsive\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_v_card_title, {\n    class: \"text-xs-h6 text-md-h5 text-lg-h4\"\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }), _hoisted_2, _createVNode(_component_v_responsive, {\n    class: \"mx-auto\",\n    \"max-width\": \"344\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_text_field, {\n      type: \"email\",\n      placeholder: \"Enter your email\",\n      modelValue: $data.email,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_v_text_field, {\n      type: \"password\",\n      placeholder: \"Enter your password\",\n      modelValue: $data.password,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_btn, {\n    onClick: _cache[2] || (_cache[2] = $event => $options.login()),\n    color: \"primary\",\n    elevation: \"15\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Login\")]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"footer\", null, [_createVNode(_component_v_btn, {\n    tile: \"\",\n    outlined: \"\",\n    color: \"success\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.backToHomePage())\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Back to home page\")]),\n    _: 1 /* STABLE */\n  })])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;gEAE2DA,oBAAY,WAAT,OAAK;gEAAmBA,oBAAM;;;;;;;6DAAxFC,aAAkFC;IAApEC,KAAK,EAAC;EAAkC;sBAAC,MAAY,CAAZC,UAAY;;MAAeC,UAAM,EACxFJ,aAGeK;IAHDH,KAAK,EAAC,SAAS;IAAC,WAAS,EAAC;;sBACpC,MAA4E,CAA5EF,aAA4EM;MAA9DC,IAAI,EAAC,OAAO;MAACC,WAAW,EAAC,kBAAkB;kBAAUC,WAAK;iEAALA,WAAK;6CACxET,aAAqFM;MAAvEC,IAAI,EAAC,UAAU;MAACC,WAAW,EAAC,qBAAqB;kBAAUC,cAAQ;iEAARA,cAAQ;;;MAErFT,aAAwEU;IAA5DC,OAAK,sCAAEC,cAAK;IAAIC,KAAK,EAAC,SAAS;IAACC,SAAS,EAAC;;sBAAK,MAAK,kBAAL,OAAK;;MAEpEf,oBAES,iBADLC,aAA4FU;IAArFK,IAAI,EAAJ,EAAI;IAACC,QAAQ,EAAR,EAAQ;IAACH,KAAK,EAAC,SAAS;IAAMF,OAAK,sCAAEC,uBAAc;;sBAAI,MAAiB,kBAAjB,mBAAiB","names":["_createElementVNode","_createVNode","_component_v_card_title","class","_hoisted_1","_hoisted_2","_component_v_responsive","_component_v_text_field","type","placeholder","$data","_component_v_btn","onClick","$options","color","elevation","tile","outlined"],"sourceRoot":"","sources":["C:\\Workspace\\MovieApp\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n    \r\n    <v-card-title class=\"text-xs-h6 text-md-h5 text-lg-h4\"><b>Login</b></v-card-title><br />\r\n    <v-responsive class=\"mx-auto\" max-width=\"344\">\r\n        <v-text-field type=\"email\" placeholder=\"Enter your email\" v-model=\"email\" />\r\n        <v-text-field type=\"password\" placeholder=\"Enter your password\" v-model=\"password\" />\r\n    </v-responsive>\r\n    <v-btn v-on:click=\"login()\" color=\"primary\" elevation=\"15\">Login</v-btn>\r\n    \r\n<footer>\r\n    <v-btn tile outlined color=\"success\" v-on:click=\"backToHomePage()\">Back to home page</v-btn>\r\n</footer>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport bcrypt from 'bcryptjs';\r\nexport default {\r\n    name: 'loginPageComp',\r\n    data() {\r\n        return {\r\n            email: '',\r\n            password: ''\r\n        }\r\n    },\r\n    methods: {\r\n        /*\r\n        async login() {\r\n            const existingUser = await fetch(`http://localhost:3000/users/?email=${this.email}`);\r\n            const existingUserData = await existingUser.json();\r\n            if (existingUserData.length > 0) {\r\n                let doesPasswordMatch = bcrypt.compareSync(this.password, existingUserData[0].password);\r\n                if (doesPasswordMatch) {\r\n                    //localStorage.setItem(\"user-info\", JSON.stringify(existingUserData.data));\r\n                    return this.$router.push({\r\n                        name: 'LandingPage'\r\n                    })\r\n                } else {\r\n                    alert('Incorrect password! retry');\r\n                    this.password = '';\r\n                }\r\n            } else {\r\n                alert(\"User not found\");\r\n                this.email = '';\r\n                this.password = '';\r\n            }\r\n        },\r\n        */\r\n        async login() {\r\n            let existingUser = await axios.get(`http://localhost:3000/users/?email=${this.email}`);\r\n            if (existingUser.data.length > 0) {\r\n                let doesPasswordMatch = bcrypt.compareSync(this.password, existingUser.data[0].password);\r\n                if (doesPasswordMatch && existingUser.status == 200) {\r\n                    localStorage.setItem(\"user-info\", JSON.stringify(existingUser.data[0].name))\r\n                    localStorage.setItem(\"user-info-email\", JSON.stringify(existingUser.data[0].email));\r\n                    return this.$router.push({\r\n                        name: 'LandingPage'\r\n                    })\r\n                } else {\r\n                    alert('Incorrect password!. Retry!');\r\n                    this.password = '';\r\n                }\r\n            } else {\r\n                alert(\"User not found\");\r\n                this.email = '';\r\n                this.password = '';\r\n            }\r\n        },\r\n        backToHomePage() {\r\n            return this.$router.push({\r\n                name: 'HomePage'\r\n            })\r\n        }\r\n    },\r\n    //     mounted(){\r\n    //     let user = localStorage.getItem('user-info');\r\n    //     if(user.substring(0,7) != '{\"name\"'){\r\n    //         return this.$router.push({\r\n    //             name: 'LandingPage'\r\n    //         });\r\n    //     }else{\r\n    //         return this.login()\r\n    //     }\r\n    // }\r\n    mounted() {\r\n        let user = localStorage.getItem('user-info');\r\n        if (user) {\r\n            return this.$router.push({\r\n                name: 'LandingPage'\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nfooter {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}